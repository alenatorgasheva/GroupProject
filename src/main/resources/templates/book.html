<!DOCTYPE html>

<html lang="en" dir="ltr"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"/>

  <link rel="stylesheet" href="../../css/style_2.css"/>
  <link rel="stylesheet" href="../../css/stylee.css"/>

  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body>
  <div class="sidebar">
    <div class="logo-details">
      <span class="logo_name"></span>
    </div>
    <ul class="nav-links">
      <li>
        <a href="#" class="active">
          <i class='bx bx-grid-alt' ></i>
          <span class="links_name">Dashboard</span>
        </a>
      </li>
      <li class="log_out">
        <a href="sign-out">
          <i class='bx bx-log-out'></i>
          <span class="links_name">Log out</span>
        </a>
      </li>
    </ul>
  </div>
  <form th:action="@{/order(buy=${flight.id}, count=${count})}" method="post">
    <section class="home-section">
      <nav>
        <div class="sidebar-button">
          <i class='bx bx-menu sidebarBtn'></i>
          <span class="dashboard">Airline reservation system</span>
        </div>
        <div>
          <a href="#" th:text="${email}">example@mail.ru</a>
        </div>
      </nav>

      <div class="home-content">
        <div class="sales-boxes">
          <div class="recent-sales box">
            <div class="table-responsive">
              <main class="py-4">
                <main class="container">
                  <h1 class="heading"><ion-icon name="cart-outline"></ion-icon> Information about the order</h1>

                  <div class="item-flex">
                    <section class="checkout">
                      <h2 class="section-heading" th:text="${flight.flightNumber + ' ' + flight.cityFrom + ' -> ' + flight.cityTo}">AR2502 Novosibirsk -> Moscow</h2>

                      <div class="payment-form">
                        <form action="#" th:each="i: ${#numbers.sequence(1, count)}" method="post">
                          <h4 class="section-heading" th:text="'Information about passenger ' + ${i} + '.'">Information about passenger</h4>

                          <div class="cardholder-name">
                            <label for="cardholder-name" class="label-default">Surname</label>
                            <input type="text"
                                   th:attr="name = 'lastName-' + ${i}" id="cardholder-name_1" class="input-default"
                                   placeholder="Ivanov"/>
                          </div>
                          <div class="cardholder-name">
                            <label for="cardholder-name" class="label-default">Name</label>
                            <input type="text"
                                   th:attr="name = 'firstName-' + ${i}" id="cardholder-name" class="input-default"
                                   placeholder="Ivan"/>
                          </div>

                          <div class="card-number">
                            <label for="card-number" class="label-default">Passport number</label>
                            <input type="number"
                                   th:attr="name = 'passport-' + ${i}" id="card-number" class="input-default"
                                   placeholder="0000000000"/>
                          </div>

                          <div class="card-number">
                            <label for="card-number" class="label-default">Birthday Date</label>
                            <input type="date" min="1921-12-15" th:max="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd')}"
                                   th:attr="name = 'birthdayDate-' + ${i}" id="birth" class="input-default"/>
                          </div>

                          <p>
                            <label>
                              <input type="checkbox"
                                     th:attr="name = 'luggage-' + ${i}"/>
                              <span>Add luggage + 2500 RUB</span>
                            </label>
                          </p>
                        </form>
                      </div>

                      <p>
                        <label>
                          <input type="checkbox"
                                 name="insurance"/>
                          <span>Add insurance for passengers + 600 RUB/Per</span>
                        </label>
                      </p>

                      <p>
                        <label>
                          <input type="checkbox"
                                 name="autoregistration"
                                 th:checked="${autoregistration}"/>
                          <span>Add auto-registration for all passengers + 50 RUB/per</span>
                        </label>
                      </p>
                    </section>

                    <section class="cart">
                      <div class="cart-item-box">
                        <h2 class="section-heading">Total amount</h2>

                        <div class="product-card">
                          <div class="card">
                            <div class="detail">
                              <h4 class="product-name">Air ticket</h4>
                              <div class="wrapper">
                                <div class="price">
                                  <span id="price" th:text="${flight.price}">0</span> RUB
                                </div>
                                <div class="product-qty">
                                  <span id="quantity" th:text="${count}">1</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="product-card">
                          <div class="card" th:if="${insurance != null}">
                            <div class="detail">
                              <h4 class="product-name">Luggage</h4>
                              <div class="wrapper">
                                <div class="price">
                                  <span id="price" th:if="${insurance == null}">0 rub.</span>
                                  <span id="price" th:text="${(count * 600)} + ' rub.'"></span>
                                </div>
                                <div class="product-qty">
                                  <span id="quantity" th:text="${' x ' + count}">1</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="product-card" th:if="${insurance != null}">
                          <div class="card">
                            <div class="detail">
                              <h4 class="product-name">Insurance</h4>
                              <div class="wrapper">
                                <div class="price">
                                  <span id="price" th:text="${(count * 600)} + ' rub.'"></span>
                                </div>
                                <div class="product-qty">
                                  <span id="quantity" th:text="${' x ' + count}">1</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="product-card" th:if="${autoregistration != null}">
                          <div class="card">
                            <div class="detail">
                              <h4 class="product-name">Auto-registration</h4>
                              <div class="wrapper">
                                <div class="price">
                                  <span id="price" th:text="${(count * 50)} + ' rub.'"></span>
                                </div>
                                <div class="product-qty">
                                  <span id="quantity" th:text="${' x ' + count}">1</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="wrapper">
                        <div class="amount">
                          <div class="total">
                            <span>Total</span>
                            <span>
                              <span id="total" th:if="${flights == null or flights.isEmpty()}" th:text="${(count * flight.price)}"></span> rub.
                            </span>
                          </div>

                          <button class="btn btn-primary" href="example">
                            <span id="payAmount">BUY</span>
                          </button>

                          <button class="btnn btnn-primary">
                            <span id="cancel">CANCEL</span>
                          </button>
                        </div>
                      </div>
                    </section>
                  </div>
                </main>
              </main>
            </div>
          </div>
        </div>
      </div>
    </section>
  </form>

  <script src="../../js/scriptt.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script type="nomodule" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  <script>
  let sidebar = document.querySelector(".sidebar");
  let sidebarBtn = document.querySelector(".sidebarBtn");
  sidebarBtn.onclick = function() {
    sidebar.classList.toggle("active");
    if(sidebar.classList.contains("active")){
      sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
    } else {
    sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
    }
  }
  </script>

</body>
</html>

